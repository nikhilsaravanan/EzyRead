/*! For license information please see ocrScript.bundle.js.LICENSE.txt */
(()=>{var e={666:e=>{var t=function(e){"use strict";var t,r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var a=t&&t.prototype instanceof m?t:m,i=Object.create(a.prototype),c=new C(n||[]);return o(i,"_invoke",{value:R(e,r,c)}),i}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var f="suspendedStart",p="suspendedYield",h="executing",g="completed",y={};function m(){}function v(){}function w(){}var x={};l(x,i,(function(){return this}));var b=Object.getPrototypeOf,E=b&&b(b(_([])));E&&E!==r&&n.call(E,i)&&(x=E);var L=w.prototype=m.prototype=Object.create(x);function O(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function r(o,a,i,c){var s=d(e[o],e,a);if("throw"!==s.type){var l=s.arg,u=l.value;return u&&"object"==typeof u&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(u).then((function(e){l.value=e,i(l)}),(function(e){return r("throw",e,i,c)}))}c(s.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function R(e,t,r){var n=f;return function(o,a){if(n===h)throw new Error("Generator is already running");if(n===g){if("throw"===o)throw a;return N()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=T(i,r);if(c){if(c===y)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===f)throw n=g,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=h;var s=d(e,t,r);if("normal"===s.type){if(n=r.done?g:p,s.arg===y)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n=g,r.method="throw",r.arg=s.arg)}}}function T(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,T(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var a=d(o,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,y;var i=a.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function _(e){if(e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}return{next:N}}function N(){return{value:t,done:!0}}return v.prototype=w,o(L,"constructor",{value:w,configurable:!0}),o(w,"constructor",{value:v,configurable:!0}),v.displayName=l(w,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,l(e,s,"GeneratorFunction")),e.prototype=Object.create(L),e},e.awrap=function(e){return{__await:e}},O(S.prototype),l(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new S(u(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},O(L),l(L,s,"Generator"),l(L,i,(function(){return this})),l(L,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=_,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(s&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),A(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:_(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y}},e}(e.exports);try{regeneratorRuntime=t}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}},159:(e,t,r)=>{"use strict";const n=r(106);e.exports={recognize:async(e,t,r)=>{const o=await n(t,1,r);return o.recognize(e).finally((async()=>{await o.terminate()}))},detect:async(e,t)=>{const r=await n("osd",0,t);return r.detect(e).finally((async()=>{await r.terminate()}))}}},530:e=>{"use strict";e.exports={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3}},555:e=>{"use strict";e.exports={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"}},866:e=>{"use strict";e.exports={workerBlobURL:!0,logger:()=>{}}},51:e=>{"use strict";e.exports={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"}},248:(e,t,r)=>{"use strict";const n=r(511);let o=0;e.exports=({id:e,action:t,payload:r={}})=>{let a=e;return void 0===a&&(a=n("Job",o),o+=1),{id:a,action:t,payload:r}}},336:function(e,t,r){"use strict";const n=r(248),{log:o}=r(523),a=r(511);let i=0;e.exports=()=>{const e=a("Scheduler",i),t={},r={};let c=[];i+=1;const s=()=>Object.keys(t).length,l=()=>{if(0!==c.length){const e=Object.keys(t);for(let n=0;n<e.length;n+=1)if(void 0===r[e[n]]){c[0](t[e[n]]);break}}},u=(t,a)=>new Promise(((i,s)=>{const u=n({action:t,payload:a});c.push((async e=>{c.shift(),r[e.id]=u;try{i(await e[t].apply(this,[...a,u.id]))}catch(e){s(e)}finally{delete r[e.id],l()}})),o(`[${e}]: Add ${u.id} to JobQueue`),o(`[${e}]: JobQueue length=${c.length}`),l()}));return{addWorker:r=>(t[r.id]=r,o(`[${e}]: Add ${r.id}`),o(`[${e}]: Number of workers=${s()}`),l(),r.id),addJob:async(t,...r)=>{if(0===s())throw Error(`[${e}]: You need to have at least one worker before adding jobs`);return u(t,r)},terminate:async()=>{Object.keys(t).forEach((async e=>{await t[e].terminate()})),c=[]},getQueueLen:()=>c.length,getNumWorkers:s}}},106:(e,t,r)=>{"use strict";const n=r(477),o=r(248),{log:a}=r(523),i=r(511),c=r(530),{defaultOptions:s,spawnWorker:l,terminateWorker:u,onMessage:d,loadImage:f,send:p}=r(125);let h=0;e.exports=async(e="eng",t=c.LSTM_ONLY,r={},g={})=>{const y=i("Worker",h),{logger:m,errorHandler:v,...w}=n({...s,...r}),x={},b="string"==typeof e?e.split("+"):e;let E=t,L=g;const O=[c.DEFAULT,c.LSTM_ONLY].includes(t)&&!w.legacyCore;let S,R;const T=new Promise(((e,t)=>{R=e,S=t}));let k=l(w);k.onerror=e=>{S(e.message)},h+=1;const A=({id:e,action:t,payload:r})=>new Promise(((n,o)=>{a(`[${y}]: Start ${e}, action=${t}`),x[`${t}-${e}`]={resolve:n,reject:o},p(k,{workerId:y,jobId:e,action:t,payload:r})})),C=(e,t)=>A(o({id:t,action:"loadLanguage",payload:{langs:e,options:{langPath:w.langPath,dataPath:w.dataPath,cachePath:w.cachePath,cacheMethod:w.cacheMethod,gzip:w.gzip,lstmOnly:[c.DEFAULT,c.LSTM_ONLY].includes(E)&&!w.legacyLang}}})),_=(e,t,r,n)=>A(o({id:n,action:"initialize",payload:{langs:e,oem:t,config:r}}));d(k,(({workerId:e,jobId:t,status:r,action:n,data:o})=>{const i=`${n}-${t}`;if("resolve"===r)a(`[${e}]: Complete ${t}`),x[i].resolve({jobId:t,data:o}),delete x[i];else if("reject"===r){if(x[i].reject(o),delete x[i],"load"===n&&S(o),!v)throw Error(o);v(o)}else"progress"===r&&m({...o,userJobId:t})}));const N={id:y,worker:k,load:()=>console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)"),writeText:(e,t,r)=>A(o({id:r,action:"FS",payload:{method:"writeFile",args:[e,t]}})),readText:(e,t)=>A(o({id:t,action:"FS",payload:{method:"readFile",args:[e,{encoding:"utf8"}]}})),removeFile:(e,t)=>A(o({id:t,action:"FS",payload:{method:"unlink",args:[e]}})),FS:(e,t,r)=>A(o({id:r,action:"FS",payload:{method:e,args:t}})),reinitialize:(e="eng",t,r,n)=>{if(O&&[c.TESSERACT_ONLY,c.TESSERACT_LSTM_COMBINED].includes(t))throw Error("Legacy model requested but code missing.");const o=t||E;E=o;const a=r||L;L=a;const i=("string"==typeof e?e.split("+"):e).filter((e=>!b.includes(e)));return b.push(...i),i.length>0?C(i,n).then((()=>_(e,o,a,n))):_(e,o,a,n)},setParameters:(e={},t)=>A(o({id:t,action:"setParameters",payload:{params:e}})),recognize:async(e,t={},r={text:!0},n)=>A(o({id:n,action:"recognize",payload:{image:await f(e),options:t,output:r}})),detect:async(e,t)=>{if(O)throw Error("`worker.detect` requires Legacy model, which was not loaded.");return A(o({id:t,action:"detect",payload:{image:await f(e)}}))},terminate:async()=>(null!==k&&(u(k),k=null),Promise.resolve())};return A(o({id:undefined,action:"load",payload:{options:{lstmOnly:O,corePath:w.corePath,logging:w.logging}}})).then((()=>C(e))).then((()=>_(e,t,g))).then((()=>R(N))).catch((()=>{})),T}},592:(e,t,r)=>{"use strict";r(666);const n=r(336),o=r(106),a=r(159),i=r(51),c=r(530),s=r(555),{setLogging:l}=r(523);e.exports={languages:i,OEM:c,PSM:s,createScheduler:n,createWorker:o,setLogging:l,...a}},296:e=>{"use strict";e.exports=e=>{const t={};return"undefined"!=typeof WorkerGlobalScope?t.type="webworker":"object"==typeof document?t.type="browser":"object"==typeof process&&(t.type="node"),void 0===e?t:t[e]}},511:e=>{"use strict";e.exports=(e,t)=>`${e}-${t}-${Math.random().toString(16).slice(3,8)}`},523:function(e,t){"use strict";let r=!1;t.logging=r,t.setLogging=e=>{r=e},t.log=(...e)=>r?console.log.apply(this,e):null},477:(e,t,r)=>{"use strict";const n="browser"===r(296)("type")?e=>new URL(e,window.location.href).href:e=>e;e.exports=e=>{const t={...e};return["corePath","workerPath","langPath"].forEach((r=>{e[r]&&(t[r]=n(t[r]))})),t}},923:(e,t,r)=>{"use strict";const n=r(547).i8,o=r(866);e.exports={...o,workerPath:`https://cdn.jsdelivr.net/npm/tesseract.js@v${n}/dist/worker.min.js`}},125:(e,t,r)=>{"use strict";const n=r(923),o=r(2),a=r(714),i=r(551),c=r(661),s=r(632);e.exports={defaultOptions:n,spawnWorker:o,terminateWorker:a,onMessage:i,send:c,loadImage:s}},632:e=>{"use strict";const t=e=>new Promise(((t,r)=>{const n=new FileReader;n.onload=()=>{t(n.result)},n.onerror=({target:{error:{code:e}}})=>{r(Error(`File could not be read! Code=${e}`))},n.readAsArrayBuffer(e)})),r=async e=>{let n=e;if(void 0===e)return"undefined";if("string"==typeof e)if(/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(e))n=atob(e.split(",")[1]).split("").map((e=>e.charCodeAt(0)));else{const t=await fetch(e);n=await t.arrayBuffer()}else if("undefined"!=typeof HTMLElement&&e instanceof HTMLElement)"IMG"===e.tagName&&(n=await r(e.src)),"VIDEO"===e.tagName&&(n=await r(e.poster)),"CANVAS"===e.tagName&&await new Promise((r=>{e.toBlob((async e=>{n=await t(e),r()}))}));else if("undefined"!=typeof OffscreenCanvas&&e instanceof OffscreenCanvas){const r=await e.convertToBlob();n=await t(r)}else(e instanceof File||e instanceof Blob)&&(n=await t(e));return new Uint8Array(n)};e.exports=r},551:e=>{"use strict";e.exports=(e,t)=>{e.onmessage=({data:e})=>{t(e)}}},661:e=>{"use strict";e.exports=async(e,t)=>{e.postMessage(t)}},2:e=>{"use strict";e.exports=({workerPath:e,workerBlobURL:t})=>{let r;if(Blob&&URL&&t){const t=new Blob([`importScripts("${e}");`],{type:"application/javascript"});r=new Worker(URL.createObjectURL(t))}else r=new Worker(e);return r}},714:e=>{"use strict";e.exports=e=>{e.terminate()}},547:e=>{"use strict";e.exports={i8:"7.0.0"}}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var a=t[n]={exports:{}};return e[n].call(a.exports,a,a.exports,r),a.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e=r(592),t=r.n(e);function n(){var e,t,r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function c(r,n,a,i){var c=n&&n.prototype instanceof l?n:l,u=Object.create(c.prototype);return o(u,"_invoke",function(r,n,o){var a,i,c,l=0,u=o||[],d=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return a=t,i=0,c=e,f.n=r,s}};function p(r,n){for(i=r,c=n,t=0;!d&&l&&!o&&t<u.length;t++){var o,a=u[t],p=f.p,h=a[2];r>3?(o=h===n)&&(c=a[(i=a[4])?5:(i=3,3)],a[4]=a[5]=e):a[0]<=p&&((o=r<2&&p<a[1])?(i=0,f.v=n,f.n=a[1]):p<h&&(o=r<3||a[0]>n||n>h)&&(a[4]=r,a[5]=n,f.n=h,i=0))}if(o||r>1)return s;throw d=!0,n}return function(o,u,h){if(l>1)throw TypeError("Generator is already running");for(d&&1===u&&p(u,h),i=u,c=h;(t=i<2?e:c)||!d;){a||(i?i<3?(i>1&&(f.n=-1),p(i,c)):f.n=c:f.v=c);try{if(l=2,a){if(i||(o="next"),t=a[o]){if(!(t=t.call(a,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,i<2&&(i=0)}else 1===i&&(t=a.return)&&t.call(a),i<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),i=1);a=e}else if((t=(d=f.n<0)?c:r.call(n,f))!==s)break}catch(t){a=e,i=1,c=t}finally{l=1}}return{value:t,done:d}}}(r,a,i),!0),u}var s={};function l(){}function u(){}function d(){}t=Object.getPrototypeOf;var f=[][a]?t(t([][a]())):(o(t={},a,(function(){return this})),t),p=d.prototype=l.prototype=Object.create(f);function h(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,o(e,i,"GeneratorFunction")),e.prototype=Object.create(p),e}return u.prototype=d,o(p,"constructor",d),o(d,"constructor",u),u.displayName="GeneratorFunction",o(d,i,"GeneratorFunction"),o(p),o(p,i,"Generator"),o(p,a,(function(){return this})),o(p,"toString",(function(){return"[object Generator]"})),(n=function(){return{w:c,m:h}})()}function o(e,t,r,n){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}o=function(e,t,r,n){function i(t,r){o(e,t,(function(e){return this._invoke(t,r,e)}))}t?a?a(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r:(i("next",0),i("throw",1),i("return",2))},o(e,t,r,n)}function a(e,t,r,n,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function c(e){a(i,n,o,c,s,"next",e)}function s(e){a(i,n,o,c,s,"throw",e)}c(void 0)}))}}var c=!1,s=null,l=!1;function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Extracting Text from Image...",t=document.getElementById("ezyread-ocr-loading");t||(t=function(){var e=document.createElement("div");return e.id="ezyread-ocr-loading",e.style.cssText="\n    position: fixed;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    background: rgba(0, 0, 0, 0.85);\n    color: white;\n    padding: 30px 40px;\n    border-radius: 12px;\n    z-index: 999999;\n    font-family: Arial, sans-serif;\n    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);\n    display: none;\n    text-align: center;\n    min-width: 280px;\n  ",e.innerHTML='\n    <div style="display: flex; flex-direction: column; align-items: center; gap: 15px;">\n      <div style="width: 40px; height: 40px; border: 4px solid #fff; border-top: 4px solid transparent; border-radius: 50%; animation: spin 1s linear infinite;"></div>\n      <div style="font-size: 16px; font-weight: bold;">Extracting Text from Image...</div>\n      <div id="ezyread-ocr-progress" style="font-size: 12px; color: #ccc;">Initializing...</div>\n    </div>\n    <style>\n      @keyframes spin {\n        0% { transform: rotate(0deg); }\n        100% { transform: rotate(360deg); }\n      }\n    </style>\n  ',document.body.appendChild(e),e}()),t.style.display="block";var r=document.getElementById("ezyread-ocr-progress");r&&(r.textContent=e)}function d(){var e=document.getElementById("ezyread-ocr-loading");e&&(e.style.display="none")}function f(e){var t=document.getElementById("ezyread-ocr-progress");if(t&&e){var r=Math.round(100*e.progress);t.textContent="".concat(e.status,": ").concat(r,"%")}}function p(){return h.apply(this,arguments)}function h(){return(h=i(n().m((function e(){var r;return n().w((function(e){for(;;)switch(e.p=e.n){case 0:if(!s){e.n=1;break}return e.a(2,s);case 1:return e.p=1,e.n=2,t().createWorker("eng",1,{logger:function(e){console.log("[EzyRead OCR]",e),f(e)},errorHandler:function(e){console.error("[EzyRead OCR] Worker error:",e)}});case 2:return s=e.v,e.a(2,s);case 3:return e.p=3,r=e.v,console.error("[EzyRead OCR] Failed to initialize worker:",r),e.a(2,null)}}),e,null,[[1,3]])})))).apply(this,arguments)}function g(e){return y.apply(this,arguments)}function y(){return(y=i(n().m((function e(t){var r,o,a,i,c;return n().w((function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,u("Initializing OCR..."),e.n=1,p();case 1:if(r=e.v){e.n=2;break}throw new Error("Failed to initialize OCR worker");case 2:return u("Recognizing text..."),e.n=3,r.recognize(t);case 3:return o=e.v,a=o.data,d(),i=a.text.trim(),e.a(2,{text:i,confidence:a.confidence});case 4:return e.p=4,c=e.v,d(),console.error("[EzyRead OCR] Error extracting text:",c),console.error("[EzyRead OCR] Error details:",c.message,c.stack),m("Failed to extract text from image. "+(c.message||"Please try again.")),e.a(2,null)}}),e,null,[[0,4]])})))).apply(this,arguments)}function m(e){var t=document.createElement("div");t.style.cssText="\n    position: fixed;\n    top: 20px;\n    right: 20px;\n    background: #f44336;\n    color: white;\n    padding: 15px 20px;\n    border-radius: 8px;\n    z-index: 999999;\n    font-family: Arial, sans-serif;\n    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);\n    max-width: 300px;\n  ",t.textContent=e,document.body.appendChild(t),setTimeout((function(){t.remove()}),4e3)}function v(e){var t=document.createElement("div"),r=e.substring(0,150)+(e.length>150?"...":"");t.style.cssText="\n    position: fixed;\n    top: 20px;\n    right: 20px;\n    background: #4CAF50;\n    color: white;\n    padding: 15px 20px;\n    border-radius: 8px;\n    z-index: 999999;\n    font-family: Arial, sans-serif;\n    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);\n    max-width: 350px;\n    word-wrap: break-word;\n  ",t.innerHTML='\n    <div style="font-weight: bold; margin-bottom: 8px;">âœ“ Text Extracted Successfully</div>\n    <div style="font-size: 12px; opacity: 0.9; line-height: 1.4;">'.concat(r,"</div>\n  "),document.body.appendChild(t),setTimeout((function(){t.remove()}),5e3)}function w(e){if(e&&""!==e.trim())return"undefined"!=typeof chrome&&chrome.storage?void chrome.storage.local.get(["selectedVoiceName"],(function(t){var r=t.selectedVoiceName;if(r){var n=window.speechSynthesis.getVoices().find((function(e){return e.name===r}));n?(console.log("[EzyRead OCR] Reading extracted text:",e.substring(0,50)+"..."),function(e,t){var r=e.match(new RegExp(".{1,".concat(200,"}"),"g"));if(r&&r.length>0){var n=function(){if(o<r.length){var e=new SpeechSynthesisUtterance(r[o]);e.voice=t,e.onend=function(){o++,n()},window.speechSynthesis.speak(e)}},o=0;n()}}(e,n)):m("Selected voice not found. Please update TTS settings.")}else m("Please select a voice in TTS settings first.")})):(console.error("[EzyRead OCR] Chrome storage API not available"),void m("Extension API not available. Please reload the extension."));m("No text found in image.")}function x(e){e.style.cursor="pointer";var t=e.style.outline,r=e.style.boxShadow;e.addEventListener("mouseenter",(function(){c&&(e.style.outline="3px solid #4CAF50",e.style.boxShadow="0 0 10px rgba(76, 175, 80, 0.5)")})),e.addEventListener("mouseleave",(function(){e.style.outline=t,e.style.boxShadow=r}))}function b(e){return E.apply(this,arguments)}function E(){return(E=i(n().m((function e(t){var r,o,a;return n().w((function(e){for(;;)switch(e.p=e.n){case 0:if(c&&!l){e.n=1;break}return e.a(2);case 1:if("IMG"===(r=t.target).tagName){e.n=2;break}return e.a(2);case 2:return t.preventDefault(),t.stopPropagation(),l=!0,e.p=3,console.log("[EzyRead OCR] Processing image:",r.src),e.n=4,g(r.src);case 4:(o=e.v)&&o.text&&o.text.trim().length>0?(console.log("[EzyRead OCR] Extracted text:",o.text),console.log("[EzyRead OCR] Confidence:",o.confidence),v(o.text),w(o.text)):m("No text found in this image."),e.n=6;break;case 5:e.p=5,a=e.v,console.error("[EzyRead OCR] Error processing image:",a),m("Failed to process image. Please try again.");case 6:return e.p=6,l=!1,e.f(6);case 7:return e.a(2)}}),e,null,[[3,5,6,7]])})))).apply(this,arguments)}function L(){c=!0,console.log("[EzyRead OCR] OCR enabled"),document.querySelectorAll("img").forEach((function(e){e.addEventListener("click",b,!0),x(e)}));var e=new MutationObserver((function(e){e.forEach((function(e){e.addedNodes.forEach((function(e){"IMG"===e.tagName?(e.addEventListener("click",b,!0),x(e)):e.querySelectorAll&&e.querySelectorAll("img").forEach((function(e){e.addEventListener("click",b,!0),x(e)}))}))}))}));e.observe(document.body,{childList:!0,subtree:!0}),window.ezyreadOCRObserver=e}chrome.storage.local.get(["isOCRToggleChecked"],(function(e){(c=e.isOCRToggleChecked||!1)&&L()})),chrome.runtime.onMessage.addListener((function(e,t,r){"toggleOCR"===e.action?e.isChecked?L():(c=!1,console.log("[EzyRead OCR] OCR disabled"),document.querySelectorAll("img").forEach((function(e){e.removeEventListener("click",b,!0),e.style.cursor="",e.style.outline="",e.style.boxShadow=""})),window.ezyreadOCRObserver&&(window.ezyreadOCRObserver.disconnect(),window.ezyreadOCRObserver=null)):"stopSpeech"===e.action&&(window.speechSynthesis.cancel(),console.log("[EzyRead OCR] Speech stopped by user"))})),window.addEventListener("beforeunload",(function(){s&&(s.terminate(),s=null)})),console.log("[EzyRead OCR] Script loaded and ready")})()})();